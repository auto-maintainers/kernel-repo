unpack: true
package_dir: /sabayon-sources
image: sabayon/base-amd64
env:
- ACCEPT_LICENSE=*
- LC_ALL=en_US.UTF-8
prelude:
- chmod a+x ./override_mirror.sh && ./override_mirror.sh
- equo up
- equo i app-portage/layman dev-vcs/git sys-devel/gcc
- equo i sys-kernel/linux-sabayon sys-kernel/sabayon-sources --onlydeps
- equo cleanup
# Prepare emerge stuff
- emerge-webrsync
- layman -f && eval 'echo "y" | layman -f -a sabayon' && eval 'echo "y" | layman -a sabayon-distro'
- eselect profile set "default/linux/amd64/17.1/desktop"
- gcc-config x86_64-pc-linux-gnu-8.2.0
steps:
- |
  source /etc/profile && emerge =sys-kernel/${PACKAGE_NAME}-${PACKAGE_VERSION%\+*} && \
  ls -l /usr/src && \
  mkdir -p /${PACKAGE_NAME}/usr/src && \
  cp -rfa /usr/src/linux-5.8.0-sabayon/ /${PACKAGE_NAME}/usr/src/
